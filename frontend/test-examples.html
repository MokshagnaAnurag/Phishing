<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEURA - Test Examples</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .test-card.high {
            border-left: 5px solid #F44336;
        }

        .test-card.medium {
            border-left: 5px solid #FF9800;
        }

        .test-card.low {
            border-left: 5px solid #4CAF50;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .risk-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            color: white;
        }

        .risk-high { background: #F44336; }
        .risk-medium { background: #FF9800; }
        .risk-low { background: #4CAF50; }

        .test-type {
            font-size: 0.9em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .test-content {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .test-expected {
            margin-top: 10px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 8px;
            font-size: 0.9em;
        }

        .test-expected strong {
            color: #1976d2;
        }

        .btn-test {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            font-size: 1em;
            transition: transform 0.2s;
        }

        .btn-test:hover {
            transform: translateY(-2px);
        }

        .result-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 500px;
            width: 90%;
        }

        .result-popup.show {
            display: block;
        }

        .result-popup h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .result-item {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .overlay.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è NEURA Test Examples</h1>
            <p>Click "Test This" to see the fraud detection in action</p>
        </div>

        <div class="test-grid" id="testGrid"></div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="result-popup" id="resultPopup">
        <button class="close-btn" onclick="closePopup()">√ó</button>
        <h3>Test Result</h3>
        <div id="resultContent"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';

        const testExamples = [
            // HIGH CONFIDENCE FRAUD
            {
                type: 'SMS',
                level: 'high',
                title: 'Urgent Account Suspension',
                content: 'URGENT: Your account will be suspended in 24 hours. Click here to verify: http://bank-verify.com',
                phone: '+1234567890',
                expected: 'Fraud: true, Risk: HIGH, Confidence: 70-95%'
            },
            {
                type: 'SMS',
                level: 'high',
                title: 'Prize/Win Scam',
                content: 'Congratulations! You won ‚Çπ50,000. Claim now: www.prize-claim.in',
                phone: null,
                expected: 'Fraud: true, Risk: HIGH, Confidence: 75-90%'
            },
            {
                type: 'EMAIL',
                level: 'high',
                title: 'Phishing with Urgency',
                subject: 'Verify your account',
                body: 'Your account will be suspended. Click here to verify: http://verify-bank.com',
                sender: 'noreply@bank.com',
                expected: 'Fraud: true, Risk: HIGH, Confidence: 75-90%'
            },
            {
                type: 'URL',
                level: 'high',
                title: 'Verify Bank Account',
                url: 'http://verify-bank-account.com',
                expected: 'Fraud: true, Risk: HIGH, Confidence: 65-80%'
            },
            {
                type: 'URL',
                level: 'high',
                title: 'IP Address (Suspicious)',
                url: 'http://192.168.1.100/verify',
                expected: 'Fraud: true, Risk: HIGH, Confidence: 75-90%'
            },
            {
                type: 'CALL',
                level: 'high',
                title: 'Repeated Digits',
                phone: '+91-1111111111',
                expected: 'Fraud: true, Risk: HIGH, Confidence: 60-80%'
            },
            
            // MEDIUM CONFIDENCE
            {
                type: 'SMS',
                level: 'medium',
                title: 'Suspicious Link',
                content: 'Check out this amazing offer: http://deals-now.com/discount',
                phone: null,
                expected: 'Fraud: maybe, Risk: MEDIUM, Confidence: 40-60%'
            },
            {
                type: 'EMAIL',
                level: 'medium',
                title: 'Generic Marketing',
                subject: 'Special Offer',
                body: 'Get 30% off on all products. Shop now: https://store.com',
                sender: null,
                expected: 'Fraud: maybe, Risk: MEDIUM, Confidence: 40-60%'
            },
            {
                type: 'URL',
                level: 'medium',
                title: 'Generic Suspicious',
                url: 'http://claim-prize.com',
                expected: 'Fraud: maybe, Risk: MEDIUM, Confidence: 45-65%'
            },
            
            // LOW CONFIDENCE SAFE
            {
                type: 'SMS',
                level: 'low',
                title: 'Normal Order Update',
                content: 'Your order #12345 has been shipped. Track at: https://tracking.example.com',
                phone: null,
                expected: 'Fraud: false, Risk: LOW, Confidence: 20-40%'
            },
            {
                type: 'SMS',
                level: 'low',
                title: 'Appointment Reminder',
                content: 'Your appointment is scheduled for tomorrow at 2 PM. See you then!',
                phone: null,
                expected: 'Fraud: false, Risk: LOW, Confidence: 15-30%'
            },
            {
                type: 'EMAIL',
                level: 'low',
                title: 'Order Confirmation',
                subject: 'Order Confirmation #12345',
                body: 'Your order has been confirmed. Track at: https://tracking.example.com',
                sender: 'orders@example.com',
                expected: 'Fraud: false, Risk: LOW, Confidence: 20-40%'
            },
            {
                type: 'URL',
                level: 'low',
                title: 'Legitimate HTTPS',
                url: 'https://www.example.com',
                expected: 'Fraud: false, Risk: LOW, Confidence: 15-35%'
            },
            {
                type: 'CALL',
                level: 'low',
                title: 'Normal Format',
                phone: '+44-20-7946-0958',
                expected: 'Fraud: false, Risk: LOW, Confidence: 15-30%'
            }
        ];

        function renderTests() {
            const grid = document.getElementById('testGrid');
            grid.innerHTML = testExamples.map((test, index) => {
                let contentHtml = '';
                if (test.type === 'SMS') {
                    contentHtml = `<div class="test-content">${test.content}</div>`;
                } else if (test.type === 'EMAIL') {
                    contentHtml = `
                        <div class="test-content"><strong>Subject:</strong> ${test.subject}</div>
                        <div class="test-content"><strong>Body:</strong> ${test.body}</div>
                    `;
                } else if (test.type === 'URL') {
                    contentHtml = `<div class="test-content">${test.url}</div>`;
                } else if (test.type === 'CALL') {
                    contentHtml = `<div class="test-content">${test.phone}</div>`;
                }

                return `
                    <div class="test-card ${test.level}">
                        <div class="test-header">
                            <h3>${test.title}</h3>
                            <span class="risk-badge risk-${test.level}">${test.level.toUpperCase()}</span>
                        </div>
                        <div class="test-type">Type: ${test.type}</div>
                        ${contentHtml}
                        <div class="test-expected">
                            <strong>Expected:</strong> ${test.expected}
                        </div>
                        <button class="btn-test" onclick="runTest(${index})">Test This</button>
                    </div>
                `;
            }).join('');
        }

        async function runTest(index) {
            const test = testExamples[index];
            const overlay = document.getElementById('overlay');
            const popup = document.getElementById('resultPopup');
            const resultContent = document.getElementById('resultContent');

            overlay.classList.add('show');
            popup.classList.add('show');
            resultContent.innerHTML = '<p>Testing...</p>';

            try {
                let response;
                if (test.type === 'SMS') {
                    response = await fetch(`${API_BASE}/scan/sms`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            text: test.content,
                            phone_number: test.phone
                        })
                    });
                } else if (test.type === 'EMAIL') {
                    response = await fetch(`${API_BASE}/scan/email`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            subject: test.subject,
                            body: test.body,
                            sender: test.sender
                        })
                    });
                } else if (test.type === 'URL') {
                    response = await fetch(`${API_BASE}/scan/url`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ url: test.url })
                    });
                } else if (test.type === 'CALL') {
                    response = await fetch(`${API_BASE}/scan/call`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ phone_number: test.phone })
                    });
                }

                const result = await response.json();
                
                const confidencePercent = (result.confidence * 100).toFixed(1);
                const isMatch = (
                    (test.level === 'high' && result.is_fraud && result.risk_level === 'HIGH') ||
                    (test.level === 'medium' && result.risk_level === 'MEDIUM') ||
                    (test.level === 'low' && !result.is_fraud && result.risk_level === 'LOW')
                );

                resultContent.innerHTML = `
                    <div class="result-item">
                        <strong>Fraud Detected:</strong> ${result.is_fraud ? '‚úÖ YES' : '‚ùå NO'}
                    </div>
                    <div class="result-item">
                        <strong>Risk Level:</strong> <span class="risk-badge risk-${result.risk_level.toLowerCase()}">${result.risk_level}</span>
                    </div>
                    <div class="result-item">
                        <strong>Confidence:</strong> ${confidencePercent}%
                    </div>
                    <div class="result-item">
                        <strong>Message:</strong> ${result.message}
                    </div>
                    <div class="result-item" style="margin-top: 15px; padding: 10px; background: ${isMatch ? '#e8f5e9' : '#fff3e0'}; border-radius: 8px;">
                        <strong>Expected Match:</strong> ${isMatch ? '‚úÖ YES' : '‚ö†Ô∏è Check expected range'}
                    </div>
                `;
            } catch (error) {
                resultContent.innerHTML = `
                    <div style="color: #F44336;">
                        <strong>Error:</strong> ${error.message}<br><br>
                        Make sure the backend is running on http://localhost:8000
                    </div>
                `;
            }
        }

        function closePopup() {
            document.getElementById('overlay').classList.remove('show');
            document.getElementById('resultPopup').classList.remove('show');
        }

        // Close on overlay click
        document.getElementById('overlay').addEventListener('click', closePopup);

        // Initialize
        renderTests();
    </script>
</body>
</html>


